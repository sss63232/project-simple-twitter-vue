(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f8ca1c2"],{2871:function(t,e,a){"use strict";a("b0af")},"79aa":function(t,e,a){},"7d91":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("Navbar",{attrs:{"current-status":t.currentStatus,"current-user":t.currentUser}}),e("div",[e("a",{staticClass:"previous-page",on:{click:function(e){return t.$router.go(-1)}}},[e("img",{attrs:{src:a("c5d4"),alt:""}}),e("h4",[t._v("推文")])]),e("Post",{attrs:{"initial-tweet":t.reply},on:{"after-create-reply-modal":t.afterCreateReplyModal}}),t._l(t.reply.Replies,(function(a){return e("ReplyList",{key:a.replyId,attrs:{name:t.reply.name,reply:a}})}))],2),e("Popular")],1)},r=[],i=(a("d9e2"),function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container"},[e("router-link",{staticClass:"avatar",attrs:{to:{name:"user-tweets",params:{id:t.tweet.UserId}}}},[e("img",{staticClass:"avatar__pic",attrs:{src:t._f("emptyImage")(t.tweet.image),alt:""}}),e("div",{staticClass:"title"},[e("h4",{staticClass:"title__name"},[t._v(t._s(t.tweet.name))]),e("h4",{staticClass:"title__id"},[t._v("@"+t._s(t.tweet.account))])])]),e("div",{staticClass:"tweet-content"},[e("p",{staticClass:"description"},[t._v(" "+t._s(t.tweet.description)+" ")]),e("h5",{staticClass:"create-time"},[t._v(t._s(t._f("fromNow")(t.tweet.createdAt)))]),e("div",{staticClass:"count"},[e("div",{staticClass:"count__number"},[t._v(t._s(t.tweet.RepliesCount))]),e("div",{staticClass:"count__unit"},[t._v("回覆")]),e("div",{staticClass:"count__number"},[t._v(t._s(t.tweet.LikesCount))]),e("div",{staticClass:"count__unit"},[t._v("喜歡次數")])]),e("div",{staticClass:"icon"},[e("img",{staticClass:"icon__reply",attrs:{src:a("cbbc"),alt:""},on:{click:function(e){t.showModal=!0}}}),e("Modal",{attrs:{show:t.showModal,post:t.tweet},on:{close:function(e){t.showModal=!1},"after-create-reply-modal":t.afterCreateReplyModal}}),t.tweet.isLiked?e("img",{staticClass:"icon__like",attrs:{src:a("bf15"),alt:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteLike(t.tweet.tweetId)}}}):e("img",{staticClass:"icon__like",attrs:{src:a("eee5"),alt:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(t.tweet.tweetId)}}})],1)])],1)])}),n=[],c=a("2797"),l=a("c1df"),o=a.n(l),d=a("6783"),u=a("c968"),p=a("2708");o.a.locale("zh-tw");var w={mixins:[p["a"]],props:{initialTweet:{type:Object,required:!0}},components:{Modal:c["a"]},data(){return{showModal:!1,tweet:this.initialTweet}},watch:{initialTweet(t){this.tweet={...this.tweet,...t}}},filters:{fromNow(t){return t?o()(t).format("aLT．LL"):"-"}},methods:{afterCreateReplyModal(t){this.$emit("after-create-reply-modal",t),this.tweet.RepliesCount+=1},async addLike(t){try{const{data:e}=await d["a"].addLike({tweetId:t});if("error"===e.status)throw new Error(e.message);this.tweet={...this.tweet,isLiked:!0},this.tweet.LikesCount+=1}catch(e){u["b"].fire({title:"目前無法like"})}},async deleteLike(t){try{const{data:e}=await d["a"].deleteLike({tweetId:t});if("error"===e.status)throw new Error(e.message);this.tweet={...this.tweet,isLiked:!1},this.tweet.LikesCount-=1}catch(e){u["b"].fire({title:"目前無法unlike"})}}}},_=w,f=(a("aedc"),a("2877")),m=Object(f["a"])(_,i,n,!1,null,"1ffa09df",null),h=m.exports,A=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container"},[e("div",{staticClass:"avatar"},[e("router-link",{attrs:{to:{name:"user-tweets",params:{id:t.reply.UserId}}}},[e("img",{staticClass:"avatar__pic",attrs:{src:t._f("emptyImage")(t.reply.avatar),alt:""}})])],1),e("div",{staticClass:"tweet-content"},[e("div",{staticClass:"title"},[e("router-link",{staticClass:"title__name",attrs:{to:{name:"user-tweets",params:{id:t.reply.UserId}}}},[t._v(t._s(t.reply.name))]),e("router-link",{staticClass:"title__id",attrs:{to:{name:"user-tweets",params:{id:t.reply.UserId}}}},[t._v("@"+t._s(t.reply.UserId))]),e("router-link",{staticClass:"title__formNow",attrs:{to:""}},[t._v("．"+t._s(t._f("fromNow")(t.reply.createdAt)))])],1),e("div",{staticClass:"hashtag"},[e("router-link",{staticClass:"hashtag__reply",attrs:{to:""}},[t._v("回覆")]),e("router-link",{staticClass:"hashtag__userid",attrs:{to:""}},[t._v("@"+t._s(t.name))])],1),e("p",{staticClass:"description"},[t._v(t._s(t.reply.comment))])])])])},v=[];o.a.locale("zh-tw");var C={mixins:[p["a"]],props:{reply:{type:Object,required:!0},name:{type:String,required:!0}},filters:{fromNow(t){return t?o()(t).fromNow():"-"}}},y=C,k=(a("8391"),Object(f["a"])(y,A,v,!1,null,"24c43d3d",null)),g=k.exports,b=a("d178"),U=a("f963"),R=a("2f62"),L={components:{Post:h,ReplyList:g,Navbar:b["a"],Popular:U["a"]},data(){return{reply:{},currentStatus:{isIndex:!0,isUser:!1,isSetting:!1}}},computed:{...Object(R["b"])(["currentUser","isAuthenticated"])},created(){const t=this.$route.params.id;this.fetchReply(t)},methods:{async fetchReply(t){try{const{data:e}=await d["a"].getTweet({tweetId:t});if("error"===e.status)throw new Error(e.message);this.reply=e}catch(e){u["b"].fire({title:"目前無法取得貼文資訊"})}},async afterCreateReplyModal(t){const{tweetId:e,comment:a}=t;this.reply.Replies.unshift({UserId:this.currentUser.id,comment:a,createdAt:new Date,tweetId:e,name:this.currentUser.name,account:this.currentUser.account,avatar:this.currentUser.avatar})}}},I=L,M=(a("2871"),Object(f["a"])(I,s,r,!1,null,"606df395",null));e["default"]=M.exports},8391:function(t,e,a){"use strict";a("79aa")},aedc:function(t,e,a){"use strict";a("cbfa")},b0af:function(t,e,a){},c5d4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAOCAYAAADJ7fe0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABTSURBVHgBrdLRCQAgCATQo0ncfylHKRTqQwrM88Cojx6UYl6iqlNEvDLBCwBQQyJg5y+kChyEARxhAUc2UC27P9CRlufYQn/s3tAtZqH+sY9QFlmZh9qG/+G4HQAAAABJRU5ErkJggg=="},cbfa:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4f8ca1c2.9a822ef9.js.map