(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12acd2b4"],{2708:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var r={filters:{emptyImage:function(t){return t||"https://via.placeholder.com/350x220/DFDFDF?text=No+Image"}}}},4287:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.show?r("div",{staticClass:"modal-mask"},[r("div",{staticClass:"modal-wrapper"},[r("form",{staticClass:"modal-container",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[r("div",{staticClass:"modal-header"},[r("button",{attrs:{name:"header"},on:{click:function(e){return t.$emit("close")}}},[r("img",{attrs:{src:a("aac3"),alt:""}})])]),r("div",{staticClass:"modal-body"},[r("img",{staticClass:"avatar",attrs:{src:t._f("emptyImage")(t.currentUser.avatar),alt:""}}),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"tweet",attrs:{name:"tweet",id:"",cols:"30",rows:"10",placeholder:"有什麼新鮮事?"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),r("div",{staticClass:"modal-footer"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.textToMuch,expression:"textToMuch"}],staticClass:"warn"},[t._v("字數不可超過140字")]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.noSpace,expression:"noSpace"}],staticClass:"warn__2"},[t._v("內容不可空白")]),r("button",{staticClass:"modal-default-button",attrs:{disabled:t.isLoading}},[t._v(" 推文 ")])])])])]):t._e()},n=[],o=a("1da1"),i=a("5530"),c=(a("96cf"),a("498a"),a("b0c0"),a("d9e2"),a("6783")),s=a("c968"),u=a("2f62"),d=a("2708"),l={mixins:[d["a"]],props:{show:Boolean},data:function(){return{text:"",isLoading:!1,textToMuch:!1,noSpace:!1}},computed:Object(i["a"])({},Object(u["b"])(["currentUser","isAuthenticated"])),methods:{handleSubmit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoading=!0,!(t.text.trim().length>140)){e.next=5;break}return t.isLoading=!1,t.noSpace=!1,e.abrupt("return",t.textToMuch=!0);case 5:if(0!==t.text.trim().length){e.next=9;break}return t.textToMuch=!1,t.isLoading=!1,e.abrupt("return",t.noSpace=!0);case 9:return e.prev=9,e.next=12,c["a"].createTweet({image:t.currentUser.avatar,description:t.text});case 12:if(a=e.sent,r=a.data,s["a"].fire({title:"推文發送成功"}),t.$emit("after-create-tweet-modal",{userAvatar:t.currentUser.avatar,UserId:t.currentUser.id,name:t.currentUser.name,image:t.currentUser.avatar,account:t.currentUser.account,description:t.text,RepliesCount:0,LikesCount:0,createdAt:new Date}),t.textToMuch=!1,t.noSpace=!1,t.text="",t.$emit("close"),t.isLoading=!1,"error"!==r.status){e.next=24;break}throw t.isLoading=!1,new Error(r.message);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](9),Object(s["b"])({title:"目前無法推文"});case 29:case"end":return e.stop()}}),e,null,[[9,26]])})))()}}},m=l,p=(a("9a71"),a("2877")),f=Object(p["a"])(m,r,n,!1,null,"5b46823d",null);e["default"]=f.exports},"498a":function(t,e,a){"use strict";var r=a("23e7"),n=a("58a8").trim,o=a("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return n(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("e330"),n=a("1d80"),o=a("577e"),i=a("5899"),c=r("".replace),s="["+i+"]",u=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),l=function(t){return function(e){var a=o(n(e));return 1&t&&(a=c(a,u,"")),2&t&&(a=c(a,d,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},6783:function(t,e,a){"use strict";a("a4d3"),a("e01a");var r=a("c968"),n=function(){return localStorage.getItem("token")};e["a"]={getTweets:function(){return r["c"].get("/tweets",{headers:{Authorization:"Bearer ".concat(n())}})},getTweet:function(t){var e=t.tweetId;return r["c"].get("/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(n()," ")}})},createTweet:function(t){var e=t.image,a=t.description;return r["c"].post("/tweets",{image:e,description:a},{headers:{Authorization:"Bearer ".concat(n()," ")}})},addLike:function(t){var e=t.tweetId;return r["c"].post("tweets/".concat(e,"/like"),null,{headers:{Authorization:"Bearer ".concat(n())}})},deleteLike:function(t){var e=t.tweetId;return r["c"].post("tweets/".concat(e,"/unlike"),null,{headers:{Authorization:"Bearer ".concat(n())}})}}},"6cf5":function(t,e,a){},"9a71":function(t,e,a){"use strict";a("6cf5")},aac3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACvSURBVHgBpZPLEcMgDER3qYRW0omP6SJt+JhO3EoqCTGCJHwkYMa6wIx4D4RGDHd4vLHB4ckdLyxEyTjZAI9zPSSxBh+Z2Vy0gHKzn0kK2AsTX/1LhDMRBI6JW1tOBzOdYXXAkFhwzLG7pZFIwoA7gSpJocKqQJHAgmM4WBGMfRN6CWXNSeBhdIdDmPkTBy3mCK7aaEg4g6sLFAlX4JHkO0xTWJ6753/5z87Gq+P8AWvcmeyQzGyUAAAAAElFTkSuQmCC"},c8d2:function(t,e,a){var r=a("5e77").PROPER,n=a("d039"),o=a("5899"),i="​᠎";t.exports=function(t){return n((function(){return!!o[t]()||i[t]()!==i||r&&o[t].name!==t}))}},e01a:function(t,e,a){"use strict";var r=a("23e7"),n=a("83ab"),o=a("da84"),i=a("e330"),c=a("1a2d"),s=a("1626"),u=a("3a9b"),d=a("577e"),l=a("9bf2").f,m=a("e893"),p=o.Symbol,f=p&&p.prototype;if(n&&s(p)&&(!("description"in f)||void 0!==p().description)){var v={},A=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),e=u(f,this)?new p(t):void 0===t?p():p(t);return""===t&&(v[e]=!0),e};m(A,p),A.prototype=f,f.constructor=A;var g="Symbol(test)"==String(p("test")),h=i(f.toString),w=i(f.valueOf),x=/^Symbol\((.*)\)[^)]+$/,b=i("".replace),S=i("".slice);l(f,"description",{configurable:!0,get:function(){var t=w(this),e=h(t);if(c(v,t))return"";var a=g?S(e,7,-1):b(e,x,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:A})}}}]);
//# sourceMappingURL=chunk-12acd2b4.1b35caa7.js.map