(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c718754"],{"0510":function(e,t,r){},1511:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"navbar"},[n("Navbar",{attrs:{"current-status":e.currentStatus},on:{"after-create-tweet-modal":e.afterCreateTweetModal}})],1),n("div",{staticClass:"main"},[n("header",{staticClass:"header"},[n("button",[n("router-link",{attrs:{to:"/main"}},[n("img",{staticClass:"previous-btn",attrs:{src:r("c5d4"),alt:"backarrow"}})])],1),n("div",{staticClass:"title"},[n("p",{staticClass:"user-name"},[e._v(e._s(e.user.name))]),n("p",{staticClass:"user-tweet"},[e._v(e._s(e.tweets.length)+" 推文")])])]),n("div",{staticClass:"user-page-body"},[n("router-view",{attrs:{user:e.user,tweets:e.tweets,likes:e.likes,followers:e.Followers,followings:e.Followings,replies:e.replyTweets},on:{"after-like":e.handleAddLike,"after-delete-like":e.handleDeleteLike,"after-update":e.handleUpdate,"after-delete-on-like":e.handleDeleteLikePost,"after-remove-followship":e.handleRemoveFollowship,"after-add-followship":e.handleAddFollowship,"after-del-followship":e.handleDelFollowship,"after-cancel-cover":e.handleCancelCover,"after-create-reply-modal":e.handleReplyModal}})],1)]),n("div",{staticClass:"popular-users"},[n("PopularUsers",{attrs:{"change-top-user":e.topUsers},on:{"after-remove-pop":e.handleRemovePop,"after-add-pop":e.handleAddPop}})],1)])},a=[],s=r("1da1"),o=r("5530"),i=(r("96cf"),r("b0c0"),r("d9e2"),r("d81d"),r("4de4"),r("d3b7"),r("a4d3"),r("e01a"),r("d178")),l=r("f963"),c=r("4cce"),u=r("6783"),f=r("c968"),h=r("2f62"),d={name:"User",components:{Navbar:i["a"],PopularUsers:l["a"]},computed:Object(o["a"])({},Object(h["b"])(["currentUser","isAuthenticated"])),created:function(){var e=this,t=this.$route.params.id;this.fetchUser(t),this.fetchTweets(t),this.fetchLikes(t),this.fetchReplies(t),this.fetchFollowers(t),this.fetchFollowings(t),this.$watch((function(){return e.$route.params}),(function(t,r){if(t.id!==r.id){var n=t.id;e.fetchUser(n),e.fetchTweets(n),e.fetchLikes(n),e.fetchReplies(n),e.fetchFollowers(n),e.fetchFollowings(n)}}))},data:function(){return{currentStatus:{isIndex:!1,isUser:!0,isSetting:!1},user:{id:-1,name:"",avatar:"",introduction:"",account:"",cover:"",followersLength:0,followingsLength:0},tweets:[],replyTweets:[],likes:[],Followers:[],Followings:[],topUsers:[],isLoading:!0}},methods:{fetchUser:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,i,l,u,h,d,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,c["a"].get({userId:e});case 4:n=r.sent,a=n.data,"Error: 帳號不存在！"===a.message&&(console.log("error",a.message),f["b"].fire({title:"無此帳號，請稍後再試"})),s=a.id,o=a.name,i=a.avatar,l=a.introduction,u=a.account,h=a.cover,d=a.Followers,p=a.Followings,t.user={id:s,name:o,avatar:i,introduction:l,account:u,cover:h,followersLength:d?d.length:0,followingsLength:p?p.length:0},t.isLoading=!1,r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法取得資料，請稍後再試"});case 16:case"end":return r.stop()}}),r,null,[[0,12]])})))()},fetchTweets:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].getTweets({userId:e});case 3:if(n=r.sent,a=n.data,!a.isEmpty){r.next=8;break}return t.tweets=[],r.abrupt("return");case 8:if("Error: User has no tweets"!==a.message){r.next=13;break}return console.log("error",a.message),f["b"].fire({title:"目前沒有推文內容"}),t.tweets=[],r.abrupt("return");case 13:t.tweets=a,r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法取得資料，請稍後再試"});case 20:case"end":return r.stop()}}),r,null,[[0,16]])})))()},fetchReplies:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].getReplies({userId:e});case 3:if(n=r.sent,a=n.data,!a.isEmpty){r.next=8;break}return t.replyTweets=[],r.abrupt("return");case 8:if("Error: No replies"!==a.message){r.next=13;break}return console.log("error",a.message),f["b"].fire({title:"目前沒有推文及回覆內容"}),t.replyTweets=[],r.abrupt("return");case 13:t.replyTweets=a,r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法取得資料，請稍後再試"});case 20:case"end":return r.stop()}}),r,null,[[0,16]])})))()},fetchLikes:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].getLikes({userId:e});case 3:if(n=r.sent,a=n.data,"TypeError: Cannot read properties of null (reading 'Likes')"!==a.message){r.next=9;break}return f["b"].fire({title:"目前沒有喜歡的內容"}),t.likes=[],r.abrupt("return");case 9:if(!a.isEmpty){r.next=14;break}return console.log("error",a.message),f["b"].fire({title:"目前沒有喜歡的內容"}),t.likes=[],r.abrupt("return");case 14:t.likes=a,r.next=22;break;case 17:r.prev=17,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法取得資料，請稍後再試"}),t.likes=[];case 22:case"end":return r.stop()}}),r,null,[[0,17]])})))()},fetchFollowers:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].getFollowers({userId:e});case 3:if(n=r.sent,a=n.data,!a.isEmpty){r.next=9;break}return console.log("error",a.isEmpty),t.Followers=[],r.abrupt("return");case 9:t.Followers=a,r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法取得資料，請稍後再試"});case 16:case"end":return r.stop()}}),r,null,[[0,12]])})))()},fetchFollowings:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].getFollowings({userId:e});case 3:if(n=r.sent,a=n.data,!a.isEmpty){r.next=8;break}return t.Followings=[],r.abrupt("return");case 8:t.Followings=a,r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法取得該Followings資料，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},fetchTopUsers:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].getTopUser();case 3:r=t.sent,n=r.data,e.topUsers=n,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("error",t.t0),f["b"].fire({title:"無法取得資料，請稍後再試"});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleAddLike:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].addLike({tweetId:e});case 3:if(n=r.sent,a=n.data,"error"!==a.status){r.next=7;break}throw new Error(a.message);case 7:t.tweets=t.tweets.map((function(t){return t.tweetId===e?Object(o["a"])(Object(o["a"])({},t),{},{LikesCount:t.LikesCount+1,isLiked:!0}):t})),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法新增喜歡，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},handleDeleteLike:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].deleteLike({tweetId:e});case 3:if(n=r.sent,a=n.data,"error"!==a.status){r.next=7;break}throw new Error(a.message);case 7:t.tweets=t.tweets.map((function(t){return t.tweetId===e?Object(o["a"])(Object(o["a"])({},t),{},{LikesCount:t.LikesCount-1,isLiked:!1}):t})),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法取消喜歡，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},handleDeleteLikePost:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].deleteLike({tweetId:e});case 3:if(n=r.sent,a=n.data,"error"!==a.status){r.next=7;break}throw new Error(a.message);case 7:t.likes=t.likes.filter((function(t){return t.TweetId!==e})),f["a"].fire({title:"成功取消喜歡！"}),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法取消喜歡，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},handleRemoveFollowship:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].removeFollowship({userId:e});case 3:if(n=r.sent,a=n.data,"Error: Cannot unfollow yourself!"!==a.message){r.next=9;break}return console.log("error",a.message),f["b"].fire({title:"不能取消跟隨自己"}),r.abrupt("return");case 9:if("Error: You have not followed this user.!"!==a.message){r.next=13;break}return console.log("error",a.message),f["b"].fire({title:"已經取消跟隨"}),r.abrupt("return");case 13:f["a"].fire({title:"成功取消跟隨！"}),t.Followings=t.Followings.filter((function(t){return t.followingId!==e})),t.followingsLength,t.fetchTopUsers(),r.next=23;break;case 19:r.prev=19,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({icon:"error",title:"無法取消跟隨，請稍後再試"});case 23:case"end":return r.stop()}}),r,null,[[0,19]])})))()},handleAddFollowship:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,n={id:e},r.next=4,c["a"].addFollowship({formData:n});case 4:if(a=r.sent,s=a.data,"Error: You are already following this user."!==s.message){r.next=9;break}return f["b"].fire({title:"已經跟隨該用戶"}),r.abrupt("return");case 9:"Error: Cannot follow yourself!"===s.message&&f["b"].fire({title:"無法跟隨此用戶"}),t.Followers=t.Followers.map((function(t){return t.followerId===e?Object(o["a"])(Object(o["a"])({},t),{},{isFollowed:!0}):t})),f["a"].fire({title:"成功跟隨此用戶"}),t.fetchFollowings(t.user.id),t.followingsLength,t.fetchTopUsers(),r.next=21;break;case 17:r.prev=17,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法新增跟隨，請稍後再試"});case 21:case"end":return r.stop()}}),r,null,[[0,17]])})))()},handleDelFollowship:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].removeFollowship({userId:e});case 3:if(n=r.sent,a=n.data,"Error: Cannot unfollow yourself!"!==a.message){r.next=9;break}return console.log("error",a.message),f["b"].fire({title:"不能取消跟隨自己"}),r.abrupt("return");case 9:if("Error: You have not followed this user.!"!==a.message){r.next=13;break}return console.log("error",a.message),f["b"].fire({title:"已經取消跟隨"}),r.abrupt("return");case 13:f["a"].fire({title:"成功取消跟隨！"}),t.Followers=t.Followers.map((function(t){return t.followerId===e?Object(o["a"])(Object(o["a"])({},t),{},{isFollowed:!1}):t})),t.followingsLength,t.fetchTopUsers(),r.next=23;break;case 19:r.prev=19,r.t0=r["catch"](0),console.log("error",r.t0),f["b"].fire({title:"無法取消跟隨，請稍後再試"});case 23:case"end":return r.stop()}}),r,null,[[0,19]])})))()},handleUpdate:function(e){var t=e.name,r=e.avatar,n=e.cover,a=e.introduction;this.user=Object(o["a"])(Object(o["a"])({},this.user),{},{name:t,avatar:r,cover:n,introduction:a}),this.fetchTweets(this.user.id),this.fetchUser(this.user.id),this.fetchTopUsers(),this.fetchLikes(this.user.id),this.fetchReplies(this.user.id)},handleRemovePop:function(){this.user.followingsLength},handleAddPop:function(){this.user.followingsLength},afterCreateTweetModal:function(e){var t=e.UserId,r=e.name,n=e.image,a=e.account,s=e.description,o=e.createdAt,i=e.LikesCount,l=e.RepliesCount,c={createdAt:o,description:s,image:n,LikesCount:i,RepliesCount:l,User:{id:t,name:r,account:a,avatar:n},isLiked:!1};this.tweets.unshift(c)},handleCancelCover:function(){this.user.cover=""},handleReplyModal:function(e){var t=e.id,r=e.status;"tweets"===r?this.tweets=this.tweets.map((function(e){return e.tweetId===t.tweetId?Object(o["a"])(Object(o["a"])({},e),{},{RepliesCount:e.RepliesCount+1}):e})):"likes"===r&&(this.likes=this.likes.map((function(e){return e.TweetId===t.tweetId&&e.Tweet.repliesCount++,e})))}}},p=d,w=(r("d4a3"),r("2877")),g=Object(w["a"])(p,n,a,!1,null,"1a2189a0",null);t["default"]=g.exports},2708:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={filters:{emptyImage:function(e){return e||"https://via.placeholder.com/350x220/DFDFDF?text=No+Image"}}}},c5d4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAOCAYAAADJ7fe0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABTSURBVHgBrdLRCQAgCATQo0ncfylHKRTqQwrM88Cojx6UYl6iqlNEvDLBCwBQQyJg5y+kChyEARxhAUc2UC27P9CRlufYQn/s3tAtZqH+sY9QFlmZh9qG/+G4HQAAAABJRU5ErkJggg=="},d4a3:function(e,t,r){"use strict";r("0510")}}]);
//# sourceMappingURL=chunk-0c718754.b2bf9408.js.map