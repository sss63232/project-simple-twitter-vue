(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61c6196e"],{2708:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));const s={filters:{emptyImage(t){return t||"https://via.placeholder.com/350x220/DFDFDF?text=No+Image"}}}},4287:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return t.show?e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("form",{staticClass:"modal-container",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"modal-header"},[e("button",{attrs:{name:"header"},on:{click:function(e){return t.$emit("close")}}},[e("img",{attrs:{src:a("aac3"),alt:""}})])]),e("div",{staticClass:"modal-body"},[e("img",{staticClass:"avatar",attrs:{src:t._f("emptyImage")(t.currentUser.avatar),alt:""}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"tweet",attrs:{name:"tweet",id:"",cols:"30",rows:"10",placeholder:"有什麼新鮮事?"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),e("div",{staticClass:"modal-footer"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.textToMuch,expression:"textToMuch"}],staticClass:"warn"},[t._v("字數不可超過140字")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.noSpace,expression:"noSpace"}],staticClass:"warn__2"},[t._v("內容不可空白")]),e("button",{staticClass:"modal-default-button",attrs:{disabled:t.isLoading}},[t._v(" 推文 ")])])])])]):t._e()},r=[],i=(a("d9e2"),a("6783")),n=a("c968"),o=a("2f62"),c=a("2708"),u={mixins:[c["a"]],props:{show:Boolean},data(){return{text:"",isLoading:!1,textToMuch:!1,noSpace:!1}},computed:{...Object(o["b"])(["currentUser","isAuthenticated"])},methods:{async handleSubmit(){if(this.isLoading=!0,this.text.trim().length>140)return this.isLoading=!1,this.noSpace=!1,this.textToMuch=!0;if(0===this.text.trim().length)return this.textToMuch=!1,this.isLoading=!1,this.noSpace=!0;try{const{data:t}=await i["a"].createTweet({image:this.currentUser.avatar,description:this.text});if(n["a"].fire({title:"推文發送成功"}),this.$emit("after-create-tweet-modal",{userAvatar:this.currentUser.avatar,UserId:this.currentUser.id,name:this.currentUser.name,image:this.currentUser.avatar,account:this.currentUser.account,description:this.text,RepliesCount:0,LikesCount:0,createdAt:new Date}),this.textToMuch=!1,this.noSpace=!1,this.text="",this.$emit("close"),this.isLoading=!1,"error"===t.status)throw this.isLoading=!1,new Error(t.message)}catch(t){Object(n["b"])({title:"目前無法推文"})}}}},d=u,h=(a("4b81"),a("2877")),l=Object(h["a"])(d,s,r,!1,null,"5b46823d",null);e["default"]=l.exports},4293:function(t,e,a){},"4b81":function(t,e,a){"use strict";a("4293")},6783:function(t,e,a){"use strict";var s=a("c968");const r=()=>localStorage.getItem("token");e["a"]={getTweets(){return s["c"].get("/tweets",{headers:{Authorization:"Bearer "+r()}})},getTweet({tweetId:t}){return s["c"].get("/tweets/"+t,{headers:{Authorization:`Bearer ${r()} `}})},createTweet({image:t,description:e}){return s["c"].post("/tweets",{image:t,description:e},{headers:{Authorization:`Bearer ${r()} `}})},addLike({tweetId:t}){return s["c"].post(`tweets/${t}/like`,null,{headers:{Authorization:"Bearer "+r()}})},deleteLike({tweetId:t}){return s["c"].post(`tweets/${t}/unlike`,null,{headers:{Authorization:"Bearer "+r()}})}}},aac3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACvSURBVHgBpZPLEcMgDER3qYRW0omP6SJt+JhO3EoqCTGCJHwkYMa6wIx4D4RGDHd4vLHB4ckdLyxEyTjZAI9zPSSxBh+Z2Vy0gHKzn0kK2AsTX/1LhDMRBI6JW1tOBzOdYXXAkFhwzLG7pZFIwoA7gSpJocKqQJHAgmM4WBGMfRN6CWXNSeBhdIdDmPkTBy3mCK7aaEg4g6sLFAlX4JHkO0xTWJ6753/5z87Gq+P8AWvcmeyQzGyUAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=chunk-61c6196e.b24b7b74.js.map