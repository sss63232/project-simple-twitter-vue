{"version":3,"sources":["webpack:///./src/components/tweet.vue?4b8f","webpack:///./src/components/posts.vue?7843","webpack:///./src/views/main.vue","webpack:///./src/components/tweet.vue","webpack:///src/components/tweet.vue","webpack:///./src/components/tweet.vue?96c9","webpack:///./src/components/tweet.vue?a7ad","webpack:///./src/components/posts.vue","webpack:///src/components/posts.vue","webpack:///./src/components/posts.vue?d566","webpack:///./src/components/posts.vue?69b3","webpack:///src/views/main.vue","webpack:///./src/views/main.vue?4e6d","webpack:///./src/views/main.vue?8156","webpack:///./src/views/main.vue?60e5"],"names":["render","_vm","this","_c","_self","staticClass","attrs","currentStatus","on","afterCreateTweetModal","afterCreateTweet","_l","posts","post","key","tweetId","staticRenderFns","_v","$event","stopPropagation","preventDefault","handleSubmit","apply","arguments","_f","currentUser","avatar","directives","name","rawName","value","text","expression","domProps","target","composing","textToMuch","noSpace","isLoading","mixins","emptyImageFilter","data","computed","mapState","methods","trim","length","tweetsAPI","createTweet","image","description","Toast","fire","title","status","Error","message","$emit","userAvatar","UserId","id","account","RepliesCount","LikesCount","createdAt","Date","error","Toast2","component","params","_s","require","showModal","afterCreateReplyModal","isLiked","deleteLike","addLike","components","Modal","props","initialPost","type","Object","required","watch","filters","fromNow","dateTime","moment","Tweet","Posts","Navbar","Popular","isIndex","isUser","isSetting","created","fetchPosts","getTweets","console","log","payload","unshift","tweet"],"mappings":"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","file":"js/chunk-63a6bb2f.cf4b73b4.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tweet.vue?vue&type=style&index=0&id=3b612d4f&prod&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./posts.vue?vue&type=style&index=0&id=58341f40&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('Navbar',{attrs:{\"current-status\":_vm.currentStatus},on:{\"after-create-tweet-modal\":_vm.afterCreateTweetModal}}),_c('div',{staticClass:\"main-page\"},[_c('Tweet',{on:{\"after-create-tweet\":_vm.afterCreateTweet}}),_vm._l((_vm.posts),function(post){return _c('Posts',{key:post.tweetId,attrs:{\"initial-post\":post}})})],2),_c('Popular')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"home\"},[_vm._v(\"首頁\")]),_c('form',{staticClass:\"form\",attrs:{\"action\":\"\"},on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit.apply(null, arguments)}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.currentUser.avatar),\"alt\":\"\"}}),_c('div',{staticClass:\"right-place\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],staticClass:\"textarea\",attrs:{\"name\":\"tweet\",\"id\":\"\",\"cols\":\"30\",\"rows\":\"10\",\"placeholder\":\"有什麼新鮮事?\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing)return;_vm.text=$event.target.value}}}),_c('div',{staticClass:\"submit-group\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textToMuch),expression:\"textToMuch\"}],staticClass:\"warn\"},[_vm._v(\"字數不可超過140字\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noSpace),expression:\"noSpace\"}],staticClass:\"warn__2\"},[_vm._v(\"內容不可空白\")]),_c('button',{staticClass:\"btn-tweet\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isLoading}},[_vm._v(\" 推文 \")])])])]),_c('div',{staticClass:\"divide\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <h1 class=\"home\">首頁</h1>\n    <form action=\"\" class=\"form\" @submit.stop.prevent=\"handleSubmit\">\n      <img :src=\"currentUser.avatar | emptyImage\" alt=\"\" class=\"avatar\" />\n      <div class=\"right-place\">\n        <textarea\n          name=\"tweet\"\n          id=\"\"\n          cols=\"30\"\n          rows=\"10\"\n          placeholder=\"有什麼新鮮事?\"\n          class=\"textarea\"\n          v-model=\"text\"\n        ></textarea>\n        <div class=\"submit-group\">\n          <div class=\"warn\" v-show=\"textToMuch\">字數不可超過140字</div>\n          <div class=\"warn__2\" v-show=\"noSpace\">內容不可空白</div>\n          <button type=\"submit\" class=\"btn-tweet\" :disabled=\"isLoading\">\n            推文\n          </button>\n        </div>\n      </div>\n    </form>\n    <div class=\"divide\"></div>\n  </div>\n</template>\n\n<script>\nimport tweetsAPI from \"../apis/tweets.js\";\nimport { Toast } from \"./../utils/helper\";\nimport { Toast2 } from \"./../utils/helper\";\nimport { mapState } from \"vuex\";\nimport { emptyImageFilter } from \"../utils/mixins\";\n\nexport default {\n  mixins: [emptyImageFilter],\n  data() {\n    return {\n      text: \"\",\n      isLoading: false,\n      textToMuch: false,\n      noSpace: false,\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n  },\n  methods: {\n    async handleSubmit() {\n      this.isLoading = true;\n      if (this.text.trim().length > 140) {\n        this.isLoading = false;\n        this.noSpace = false;\n        return (this.textToMuch = true);\n      }\n      if (this.text.trim().length === 0) {\n        this.textToMuch = false;\n        this.isLoading = false;\n        return (this.noSpace = true);\n      }\n      try {\n        const { data } = await tweetsAPI.createTweet({\n          image: this.currentUser.avatar,\n          description: this.text,\n        });\n        this.textToMuch = false;\n        this.noSpace = false;\n        Toast.fire({\n          title: \"發文成功\",\n        });\n        this.isLoading = false;\n        if (data.status === \"error\") {\n          this.isLoading = false;\n          throw new Error(data.message);\n        }\n        this.$emit(\"after-create-tweet\", {\n          userAvatar: this.currentUser.avatar,\n          UserId: this.currentUser.id,\n          name: this.currentUser.name,\n          image: this.currentUser.avatar,\n          account: this.currentUser.account,\n          description: this.text,\n          RepliesCount: 0,\n          LikesCount: 0,\n          createdAt: new Date(),\n        });\n      } catch (error) {\n        Toast2.fire({\n          title: \"無法推文\",\n        });\n      }\n      this.text = \"\";\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  width: 600px;\n  display: flex;\n  flex-direction: column;\n  .home {\n    opacity: 0.9;\n    z-index: 995;\n    position: fixed;\n    top: 0;\n    background-color: #fff;\n    display: flex;\n    align-items: center;\n    width: 600px;\n    height: 55px;\n    font-size: 18px;\n    border: 1px solid #e6ecf0;\n    margin: 0;\n    padding-left: 10px;\n    font-weight: bold;\n  }\n  .form {\n    margin-top: 55px;\n    position: relative;\n    border: 1px solid #e6ecf0;\n    width: 600x;\n    height: 120px;\n    display: flex;\n    .avatar {\n      width: 50px;\n      height: 50px;\n      position: relative;\n      margin-top: 10px;\n      margin-left: 15px;\n      border-radius: 100%;\n    }\n    .right-place {\n      display: flex;\n      flex-direction: column;\n      textarea {\n        margin-top: 20px;\n        margin-left: 5px;\n        resize: none;\n        width: 530px;\n        height: 94px;\n        border: none;\n        font-size: 25px;\n      }\n      textarea::-webkit-input-placeholder {\n        font-size: 18px;\n        font: #9197a3;\n        font-family: \"Noto Sans TC\";\n      }\n    }\n    .submit-group {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n      margin-right: 20px;\n      margin-bottom: 10px;\n      .warn {\n        margin-right: 10px;\n        margin-top: 8px;\n        width: 138px;\n        height: 15px;\n        font-size: 15px;\n        color: #fc5a5a;\n        font-weight: 500;\n      }\n      .warn__2 {\n        margin-right: 10px;\n        margin-top: 8px;\n        width: 100px;\n        height: 15px;\n        font-size: 15px;\n        color: #fc5a5a;\n        font-weight: 500;\n      }\n      .btn-tweet {\n        // position: absolute;\n        height: 38px;\n        width: 66px;\n        font-size: 18px;\n        color: #ffffff;\n        background-color: #ff6600;\n        border-radius: 100px;\n        // left: 520px;\n        // top: 70px;\n      }\n    }\n  }\n  .divide {\n    height: 10px;\n    width: 600px;\n    background-color: #e6ecf0;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tweet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tweet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tweet.vue?vue&type=template&id=3b612d4f&scoped=true&\"\nimport script from \"./tweet.vue?vue&type=script&lang=js&\"\nexport * from \"./tweet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tweet.vue?vue&type=style&index=0&id=3b612d4f&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b612d4f\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('router-link',{staticClass:\"router-to-reply\",attrs:{\"tag\":\"div\",\"to\":{ name: 'reply', params: { id: _vm.post.tweetId } }}},[_c('div',{staticClass:\"container\"},[_c('router-link',{staticClass:\"avatar\",attrs:{\"to\":{ name: 'user-tweets', params: { id: _vm.post.UserId } }}},[_c('img',{staticClass:\"avatar__pic\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.post.userAvatar),\"alt\":\"\"}})]),_c('div',{staticClass:\"tweet-content\"},[_c('div',{staticClass:\"title\"},[_c('router-link',{staticClass:\"title__name\",attrs:{\"to\":{ name: 'user-tweets', params: { id: _vm.post.UserId } }}},[_vm._v(_vm._s(_vm.post.name))]),_c('router-link',{staticClass:\"title__id\",attrs:{\"to\":{ name: 'user-tweets', params: { id: _vm.post.UserId } }}},[_vm._v(\"@\"+_vm._s(_vm.post.account)+\"．\")]),_c('h4',{staticClass:\"title__formNow\"},[_vm._v(_vm._s(_vm._f(\"fromNow\")(_vm.post.createdAt)))])],1),_c('p',{staticClass:\"description\"},[_vm._v(\" \"+_vm._s(_vm.post.description)+\" \")]),_c('div',{staticClass:\"icon\"},[_c('router-link',{attrs:{\"to\":\"\"}},[_c('img',{staticClass:\"icon__reply\",attrs:{\"src\":require(\"../assets/reply2.png\"),\"alt\":\"\"},on:{\"click\":function($event){_vm.showModal = true}}}),_c('Modal',{attrs:{\"show\":_vm.showModal,\"post\":_vm.post},on:{\"close\":function($event){_vm.showModal = false},\"after-create-reply-modal\":_vm.afterCreateReplyModal}})],1),_c('h5',[_vm._v(_vm._s(_vm.post.RepliesCount))]),(_vm.post.isLiked)?_c('img',{staticClass:\"icon__like\",attrs:{\"src\":require(\"../assets/likedx2.png\"),\"alt\":\"\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteLike(_vm.post.tweetId)}}}):_c('img',{staticClass:\"icon__like\",attrs:{\"src\":require(\"../assets/like2.png\"),\"alt\":\"\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addLike(_vm.post.tweetId)}}}),_c('h5',[_vm._v(_vm._s(_vm.post.LikesCount))])],1)])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <router-link\n      class=\"router-to-reply\"\n      tag=\"div\"\n      :to=\"{ name: 'reply', params: { id: post.tweetId } }\"\n    >\n      <div class=\"container\">\n        <router-link class=\"avatar\" :to=\"{ name: 'user-tweets', params: { id: post.UserId } }\">\n          <img :src=\"post.userAvatar | emptyImage\" alt=\"\" class=\"avatar__pic\" />\n        </router-link>\n        <div class=\"tweet-content\">\n          <div class=\"title\">\n            <router-link\n              :to=\"{ name: 'user-tweets', params: { id: post.UserId } }\"\n              class=\"title__name\"\n              >{{ post.name }}</router-link\n            >\n            <router-link\n              :to=\"{ name: 'user-tweets', params: { id: post.UserId } }\"\n              class=\"title__id\"\n              >@{{ post.account }}．</router-link\n            >\n            <h4 class=\"title__formNow\">{{ post.createdAt | fromNow }}</h4>\n          </div>\n          <p class=\"description\">\n            {{ post.description }}\n          </p>\n          <div class=\"icon\">\n            <router-link to=\"\">\n              <img\n                src=\"../assets/reply2.png\"\n                class=\"icon__reply\"\n                alt=\"\"\n                @click=\"showModal = true\"\n              />\n              <Modal\n                :show=\"showModal\"\n                :post=\"post\"\n                @close=\"showModal = false\"\n                @after-create-reply-modal=\"afterCreateReplyModal\"\n              />\n            </router-link>\n            <h5>{{ post.RepliesCount }}</h5>\n            <img\n              src=\"../assets/likedx2.png\"\n              class=\"icon__like\"\n              alt=\"\"\n              v-if=\"post.isLiked\"\n              @click.stop.prevent=\"deleteLike(post.tweetId)\"\n            />\n            <img\n              src=\"../assets/like2.png\"\n              class=\"icon__like\"\n              alt=\"\"\n              v-else\n              @click.stop.prevent=\"addLike(post.tweetId)\"\n            />\n            <h5>{{ post.LikesCount }}</h5>\n          </div>\n        </div>\n      </div>\n    </router-link>\n  </div>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport Modal from \"./ReplyModal.vue\";\nimport { Toast2 } from \"./../utils/helper\";\nimport tweetsAPI from \"./../apis/tweets\";\nimport { emptyImageFilter } from \"./../utils/mixins\";\n\nexport default {\n  components: {\n    Modal,\n  },\n  mixins: [emptyImageFilter],\n  props: {\n    initialPost: {\n      type: Object,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      post: this.initialPost,\n      showModal: false,\n    };\n  },\n  watch: {\n    initialPost() {\n      this.post = this.initialPost;\n    },\n  },\n  methods: {\n    afterCreateReplyModal() {\n      this.post.RepliesCount += 1;\n    },\n    async addLike(tweetId) {\n      try {\n        const { data } = await tweetsAPI.addLike({ tweetId });\n        if (data.status === \"error\") {\n          throw new Error(data.message);\n        }\n        this.post = {\n          ...this.post,\n          isLiked: true,\n        };\n        this.post.LikesCount += 1;\n      } catch (error) {\n        Toast2.fire({\n          title: \"目前無法加入愛心\",\n        });\n      }\n    },\n    async deleteLike(tweetId) {\n      try {\n        const { data } = await tweetsAPI.deleteLike({ tweetId });\n        if (data.status === \"error\") {\n          throw new Error(data.message);\n        }\n        this.post = {\n          ...this.post,\n          isLiked: false,\n        };\n        this.post.LikesCount -= 1;\n      } catch (error) {\n        Toast2.fire({\n          title: \"目前無法移除愛心\",\n        });\n      }\n    },\n  },\n  filters: {\n    fromNow(dateTime) {\n      return dateTime ? moment(dateTime).fromNow() : \"-\";\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.router-to-reply {\n  z-index: -1;\n  cursor: pointer;\n}\n.container {\n  &:hover {\n    background-color: rgb(240, 240, 240);\n  }\n  width: 600px;\n  min-height: 100px;\n  display: flex;\n  border-top: 1px #e6ecf0 solid;\n  border-right: 1px #e6ecf0 solid;\n  border-left: 1px #e6ecf0 solid;\n  .description {\n    font-size: 15px;\n    word-break: break-all;\n  }\n  .tweet-content {\n    display: flex;\n    flex-direction: column;\n    margin-top: 15px;\n    .title {\n      margin-bottom: 6px;\n      font-size: 15px;\n      display: flex;\n      &__name {\n        margin-right: 5px;\n        font-weight: bold;\n        &:hover {\n          text-decoration: underline;\n        }\n      }\n      &__id {\n        color: #657786;\n        font-weight: 500;\n      }\n      &__formNow {\n        color: #657786;\n        font-weight: 500;\n        &:hover {\n          text-decoration: underline;\n        }\n      }\n    }\n  }\n  .avatar {\n    .avatar__pic {\n      margin-right: 10px;\n      margin-top: 15px;\n      margin-left: 10px;\n      height: 50px;\n      width: 50px;\n      border-radius: 100%;\n      &:hover {\n        opacity: 0.8;\n      }\n    }\n  }\n  .icon {\n    margin-top: 0.5rem;\n    display: flex;\n    position: relative;\n    margin-bottom: 5px;\n    h5 {\n      font-size: 13px;\n      margin-left: 5px;\n      margin-right: 50px;\n      z-index: 5;\n    }\n    &__reply,\n    &__like {\n      &:hover {\n        background-color: rgb(189, 189, 189);\n      }\n      z-index: 5;\n      height: 15px;\n      width: 15px;\n      margin-top: 3px;\n      margin-right: 10px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./posts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./posts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./posts.vue?vue&type=template&id=58341f40&scoped=true&\"\nimport script from \"./posts.vue?vue&type=script&lang=js&\"\nexport * from \"./posts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./posts.vue?vue&type=style&index=0&id=58341f40&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58341f40\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"container\">\n    <Navbar @after-create-tweet-modal=\"afterCreateTweetModal\" :current-status=\"currentStatus\" />\n    <div class=\"main-page\">\n      <Tweet @after-create-tweet=\"afterCreateTweet\" />\n      <Posts :initial-post=\"post\" v-for=\"post in posts\" :key=\"post.tweetId\" />\n    </div>\n    <Popular />\n  </div>\n</template>\n\n<script>\nimport Tweet from \"../components/tweet.vue\";\nimport Posts from \"../components/posts.vue\";\nimport Navbar from \"../components/Navbar.vue\";\nimport Popular from \"../components/PopularUsers.vue\";\nimport tweetsAPI from \"../apis/tweets.js\";\nimport { Toast2 } from \"./../utils/helper\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  //main是保留字，會報錯\n  // name: \"main\",\n  components: {\n    Tweet,\n    Posts,\n    Navbar,\n    Popular,\n  },\n\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n  },\n  data() {\n    return {\n      posts: [],\n      currentStatus: {\n        isIndex: true,\n        isUser: false,\n        isSetting: false,\n      },\n    };\n  },\n  created() {\n    this.fetchPosts();\n  },\n  methods: {\n    async fetchPosts() {\n      try {\n        const { data } = await tweetsAPI.getTweets();\n        if (data.status === \"error\") {\n          console.log(\"error\", data.message);\n        }\n        this.posts = data;\n      } catch (error) {\n        Toast2.fire({\n          title: \"無法取得該推文資料，請稍後再試\",\n        });\n      }\n    },\n    async afterCreateTweet(payload) {\n      const {\n        UserId,\n        name,\n        image,\n        account,\n        description,\n        RepliesCount,\n        LikesCount,\n        createdAt,\n        userAvatar,\n      } = payload;\n      this.posts.unshift({\n        UserId,\n        name,\n        image,\n        account,\n        description,\n        RepliesCount,\n        LikesCount,\n        createdAt,\n        userAvatar,\n      });\n    },\n    async afterCreateTweetModal(tweet) {\n      try {\n        const { data } = await tweetsAPI.createTweet({ tweet });\n        console.log(data);\n        const {\n          tweetId,\n          UserId,\n          name,\n          image,\n          account,\n          description,\n          RepliesCount,\n          LikesCount,\n          createdAt,\n          userAvatar,\n        } = tweet;\n        this.posts.unshift({\n          tweetId,\n          UserId,\n          name,\n          image,\n          account,\n          description,\n          RepliesCount,\n          LikesCount,\n          createdAt,\n          userAvatar,\n        });\n      } catch (error) {\n        Toast2.fire({\n          title: \"目前無法推文，請稍後再試\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  display: flex;\n  justify-content: center;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=5e77957d&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=5e77957d&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e77957d\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=5e77957d&prod&lang=scss&scoped=true&\""],"sourceRoot":""}