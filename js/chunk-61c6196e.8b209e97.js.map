{"version":3,"sources":["webpack:///./src/utils/mixins.js","webpack:///./src/components/TweetModal.vue","webpack:///src/components/TweetModal.vue","webpack:///./src/components/TweetModal.vue?17e6","webpack:///./src/components/TweetModal.vue?ee65","webpack:///./src/components/TweetModal.vue?630e","webpack:///./src/apis/tweets.js","webpack:///./src/assets/X.png"],"names":["emptyImageFilter","filters","emptyImage","src","render","_vm","this","_c","_self","show","staticClass","on","$event","stopPropagation","preventDefault","handleSubmit","apply","arguments","attrs","$emit","require","_f","currentUser","avatar","directives","name","rawName","value","text","expression","domProps","target","composing","textToMuch","_v","noSpace","isLoading","_e","staticRenderFns","mixins","props","Boolean","data","computed","mapState","methods","trim","length","tweetsAPI","createTweet","image","description","Toast","fire","title","userAvatar","UserId","id","account","RepliesCount","LikesCount","createdAt","Date","status","Error","message","error","Toast2","component","getToken","localStorage","getItem","getTweets","apiHelper","get","headers","Authorization","getTweet","tweetId","post","addLike","deleteLike","module","exports"],"mappings":"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","file":"js/chunk-61c6196e.8b209e97.js","sourcesContent":["export const emptyImageFilter = {\n  filters: {\n    emptyImage (src) {\n      return src || 'https://via.placeholder.com/350x220/DFDFDF?text=No+Image'\n    }\n  }\n}","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.show)?_c('div',{staticClass:\"modal-mask\"},[_c('div',{staticClass:\"modal-wrapper\"},[_c('form',{staticClass:\"modal-container\",on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"modal-header\"},[_c('button',{attrs:{\"name\":\"header\"},on:{\"click\":function($event){return _vm.$emit('close')}}},[_c('img',{attrs:{\"src\":require(\"../assets/X.png\"),\"alt\":\"\"}})])]),_c('div',{staticClass:\"modal-body\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.currentUser.avatar),\"alt\":\"\"}}),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],staticClass:\"tweet\",attrs:{\"name\":\"tweet\",\"id\":\"\",\"cols\":\"30\",\"rows\":\"10\",\"placeholder\":\"有什麼新鮮事?\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing)return;_vm.text=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textToMuch),expression:\"textToMuch\"}],staticClass:\"warn\"},[_vm._v(\"字數不可超過140字\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noSpace),expression:\"noSpace\"}],staticClass:\"warn__2\"},[_vm._v(\"內容不可空白\")]),_c('button',{staticClass:\"modal-default-button\",attrs:{\"disabled\":_vm.isLoading}},[_vm._v(\" 推文 \")])])])])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"show\" class=\"modal-mask\">\n    <div class=\"modal-wrapper\">\n      <form class=\"modal-container\" @submit.stop.prevent=\"handleSubmit\">\n        <div class=\"modal-header\">\n          <button name=\"header\" @click=\"$emit('close')\">\n            <img src=\"../assets/X.png\" alt=\"\" />\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <img :src=\"currentUser.avatar | emptyImage\" alt=\"\" class=\"avatar\" />\n          <textarea\n            class=\"tweet\"\n            name=\"tweet\"\n            id=\"\"\n            cols=\"30\"\n            rows=\"10\"\n            placeholder=\"有什麼新鮮事?\"\n            v-model=\"text\"\n          ></textarea>\n        </div>\n        <div class=\"modal-footer\">\n          <div class=\"warn\" v-show=\"textToMuch\">字數不可超過140字</div>\n          <div class=\"warn__2\" v-show=\"noSpace\">內容不可空白</div>\n          <button class=\"modal-default-button\" :disabled=\"isLoading\">\n            推文\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport tweetsAPI from \"../apis/tweets.js\";\nimport { Toast } from \"./../utils/helper\";\nimport { Toast2 } from \"./../utils/helper\";\nimport { mapState } from \"vuex\";\nimport { emptyImageFilter } from \"../utils/mixins\";\n\nexport default {\n  mixins: [emptyImageFilter],\n  props: {\n    show: Boolean,\n  },\n  data() {\n    return {\n      text: \"\",\n      isLoading: false,\n      textToMuch: false,\n      noSpace: false,\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n  },\n  methods: {\n    async handleSubmit() {\n      this.isLoading = true;\n      if (this.text.trim().length > 140) {\n        this.isLoading = false;\n        this.noSpace = false;\n        return (this.textToMuch = true);\n      }\n      if (this.text.trim().length === 0) {\n        this.textToMuch = false;\n        this.isLoading = false;\n        return (this.noSpace = true);\n      }\n      try {\n        const { data } = await tweetsAPI.createTweet({\n          image: this.currentUser.avatar,\n          description: this.text,\n        });\n        Toast.fire({\n          title: \"推文發送成功\",\n        });\n        this.$emit(\"after-create-tweet-modal\", {\n          userAvatar: this.currentUser.avatar,\n          UserId: this.currentUser.id,\n          name: this.currentUser.name,\n          image: this.currentUser.avatar,\n          account: this.currentUser.account,\n          description: this.text,\n          RepliesCount: 0,\n          LikesCount: 0,\n          createdAt: new Date(),\n        });\n        this.textToMuch = false;\n        this.noSpace = false;\n        this.text = \"\";\n        this.$emit(\"close\");\n        this.isLoading = false;\n        if (data.status === \"error\") {\n          this.isLoading = false;\n          throw new Error(data.message);\n        }\n      } catch (error) {\n        Toast2({\n          title: \"目前無法推文\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-mask {\n  position: fixed;\n  z-index: 999;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.4);\n  display: table;\n  transition: opacity 0.3s ease;\n}\n\n.modal-wrapper {\n  display: flex;\n  justify-content: center;\n  margin-top: 60px;\n}\n\n.modal-container {\n  width: 600px;\n  height: 300px;\n  margin: 0 auto;\n  background-color: #ffffff;\n  border-radius: 14px;\n}\n\n.modal-header {\n  padding: 15px;\n  margin-top: 0;\n  color: #42b983;\n  border-bottom: 1px #e6ecf0 solid;\n}\n\n.modal-body {\n  padding: 0 10px 0 10px;\n  margin: 20px 0;\n  display: flex;\n  .avatar {\n    border-radius: 100%;\n    height: 50px;\n    width: 50px;\n    margin-right: 10px;\n  }\n  .tweet {\n    font-size: 25px;\n    resize: none;\n    width: 510px;\n    height: 149px;\n    border: none;\n  }\n  .tweet::-webkit-input-placeholder {\n    font-size: 18px;\n    font: #9197a3;\n  }\n}\n.modal-footer {\n  display: flex;\n  justify-content: end;\n  .warn {\n    margin-right: 10px;\n    margin-top: 8px;\n    width: 138px;\n    height: 15px;\n    font-size: 15px;\n    color: #fc5a5a;\n    font-weight: 500;\n  }\n  .warn__2 {\n    margin-right: 10px;\n    margin-top: 8px;\n    width: 100px;\n    height: 15px;\n    font-size: 15px;\n    color: #fc5a5a;\n    font-weight: 500;\n  }\n  .modal-default-button {\n    margin: 0 15px 20px 0;\n    float: right;\n    width: 66px;\n    height: 38px;\n    font-size: 18px;\n    color: #ffffff;\n    background-color: #ff6600;\n    border-radius: 100px;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TweetModal.vue?vue&type=template&id=5b46823d&scoped=true&\"\nimport script from \"./TweetModal.vue?vue&type=script&lang=js&\"\nexport * from \"./TweetModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TweetModal.vue?vue&type=style&index=0&id=5b46823d&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b46823d\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetModal.vue?vue&type=style&index=0&id=5b46823d&prod&lang=scss&scoped=true&\"","import { apiHelper } from \"../utils/helper\";\nconst getToken = () => localStorage.getItem('token')\n\nexport default {\n  //main.vue首頁拿所有推文的api\n  getTweets() {\n    return apiHelper.get('/tweets',\n      {\n        headers: { Authorization: `Bearer ${getToken()}` }\n      })\n  },\n  //取得一篇tweet內容及其回覆清單\n  getTweet({ tweetId }) {\n    return apiHelper.get(`/tweets/${tweetId}`,\n      {\n        headers: { Authorization: `Bearer ${getToken()} ` }\n      })\n  },\n  //新增一則推文 \n  createTweet({ image, description }) {\n    return apiHelper.post('/tweets', { image, description }, {\n      headers: {\n        Authorization: `Bearer ${getToken()} `\n      }\n    })\n  },\n  //推文可以加入like\n  addLike({ tweetId }) {\n    return apiHelper.post(`tweets/${tweetId}/like`, null, {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  },\n  //推文可以移除like\n  deleteLike({ tweetId }) {\n    return apiHelper.post(`tweets/${tweetId}/unlike`, null, {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  },\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACvSURBVHgBpZPLEcMgDER3qYRW0omP6SJt+JhO3EoqCTGCJHwkYMa6wIx4D4RGDHd4vLHB4ckdLyxEyTjZAI9zPSSxBh+Z2Vy0gHKzn0kK2AsTX/1LhDMRBI6JW1tOBzOdYXXAkFhwzLG7pZFIwoA7gSpJocKqQJHAgmM4WBGMfRN6CWXNSeBhdIdDmPkTBy3mCK7aaEg4g6sLFAlX4JHkO0xTWJ6753/5z87Gq+P8AWvcmeyQzGyUAAAAAElFTkSuQmCC\""],"sourceRoot":""}